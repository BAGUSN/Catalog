<html>
<body onload="doShowAll()">
  <h1>HTML5 sessionStorage (name/value item pairs) demo</h1>

  <form name="editor">
	 <div id="hoge">
     <p>
     <label>Value: <textarea name="data" cols="41" rows="10">test</textarea></label>
     </p>

     <p>
      <label>Name: <input value="test" name="name"></label>
      <input value="getItem()" onclick="doGetItem()" type="button">
      <input value="setItem()" onclick="doSetItem()" type="button">
      <input value="removeItem()" onclick="doRemoveItem()" type="button">
     </p>
   </div>

   <div id="items_table">
     <h2>Items</h2>
     <table id="pairs"><tbody><tr><th>Name</th><th>Value</th></tr>
<tr><td><i>empty</i></td>
<td><i>empty</i></td></tr>
</tbody></table>
     <p>
     <label><input value="clear()" onclick="doClear()" type="button"> <i>*
 clear() removes all items</i></label>
     </p>
   </div>


   <script>

     function doSetItem() {
       var name = document.forms.editor.name.value;
       var data = document.forms.editor.data.value;
       sessionStorage.setItem(name, data);
       doShowAll();
     }

     function doGetItem() {
       var name = document.forms.editor.name.value;
       document.forms.editor.data.value = sessionStorage.getItem(name);
       doShowAll();
     }

     function doRemoveItem() {
       var name = document.forms.editor.name.value;
       document.forms.editor.data.value = sessionStorage.removeItem(name);
       doShowAll();
     }

     function doClear() {
       sessionStorage.clear();
       doShowAll();
     }

     function doShowAll() {
       var key = "";
       var pairs = "<tr><th>Name</th><th>Value</th></tr>\n";
       var i=0;
       for (i=0; i<=sessionStorage.length-1; i++) {
         key = sessionStorage.key(i);
         pairs += "<tr><td>"+key+"</td>\n<td>"+sessionStorage.getItem(key)+"</td></tr>\n";
       }
       if (pairs == "<tr><th>Name</th><th>Value</th></tr>\n") {
         pairs += "<tr><td><i>empty</i></td>\n<td><i>empty</i></td></tr>\n";
       }
       document.getElementById('pairs').innerHTML = pairs;
     }

   </script>

  </form>

 </body></html>